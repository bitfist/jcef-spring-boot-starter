/** AUTO-GENERATED by JCEF TypeScriptObjectProcessor â€“ DO NOT EDIT **/
import type {ResponseType} from "./ResponseType";
import {ResponseValueConverter} from "./ResponseValueConverter";

export class CefCommunicationService {
    static request<T>(className: string, methodName: string, parameters: object, responseType: ResponseType): Promise<any> {
        const targetUrl = '$backendUri/jcef';

        const requestBody = {
            className,
            methodName,
            parameters
        };

        return fetch(targetUrl, {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify(requestBody),
        })
            .then(response => {
                if (!response.ok) {
                    throw new Error(`HTTP error! Status: ${response.status} ${response.statusText}`);
                }

                return response.text();
            })
            .then(rawText => {
                return ResponseValueConverter.convert<T>(rawText, responseType);
            })
            .catch(error => {
                console.error('Error during POST request:', error);
                throw error;
            });
    };
}